# Client (Frontend)

React-приложение с современным UI на Tailwind CSS, организованное по Feature-Sliced Design.

## Технологии

- **React 19.2.0** - современная библиотека для UI
- **React Router 7.9.6** - декларативная маршрутизация
- **Axios 1.13.2** - HTTP-клиент с interceptors
- **Tailwind CSS 4** - utility-first CSS framework (через CDN)
- **Vite 7.2.2** - быстрый сборщик и dev-сервер
- **ESLint 9** - линтинг кода

## Архитектура

Проект следует **Feature-Sliced Design** методологии:

```
src/
├── app/              # Главное приложение и роутинг
│   └── App.jsx       # Корневой компонент с Routes
├── entities/         # Бизнес-сущности и API
│   ├── AuthApi.js    # API для аутентификации
│   ├── UserApi.js    # API для пользователей
│   └── TaskApi.js    # API для задач
├── features/         # Фичи (формы, функционал)
│   ├── SignInForm/   # Форма входа
│   └── SignUpForm/   # Форма регистрации
├── pages/            # Страницы приложения
│   ├── HomePage/          # Главная
│   ├── SignInPage/        # Страница входа
│   ├── SignUpPage/        # Страница регистрации
│   ├── ActivatePage/      # Активация аккаунта
│   ├── UsersPage/         # Список пользователей
│   ├── CurrentUserPage/   # Просмотр пользователя
│   ├── ProfilePage/       # Редактирование профиля
│   ├── TasksPage/         # Все задачи
│   ├── MyTasksPage/       # Мои задачи
│   └── NotFoundPage/      # 404 страница не найдена
├── widgets/          # Составные UI блоки
│   ├── Nav/          # Навигационное меню
│   └── UserList/     # Список пользователей
├── shared/           # Переиспользуемый код
│   ├── hocs/         # Higher-Order Components
│   │   ├── AuthGuard.jsx    # Защита приватных роутов
│   │   └── PublicGuard.jsx  # Защита публичных роутов
│   ├── lib/          # Библиотеки и утилиты
│   │   └── axiosInstance.js # Настроенный axios
│   └── ui/           # UI компоненты
│       └── Btn/      # Компонент кнопки
└── main.jsx          # Точка входа приложения
```

## Установка и запуск

```bash
# Установка зависимостей
npm install

# Создать .env файл
echo "VITE_API_URL=http://localhost:4000/api" > .env

# Запуск dev-сервера
npm run dev

# Сборка для production
npm run build

# Просмотр production сборки
npm run preview

# Проверка линтером
npm run lint
```

## Ключевые возможности

### Аутентификация и безопасность
- ✅ **Email-активация аккаунта** - письмо со ссылкой при регистрации
- ✅ Красивая страница активации с loading/success/error состояниями
- ✅ Блокировка входа для неактивированных аккаунтов
- ✅ JWT аутентификация с автоматическим обновлением токенов
- ✅ Axios interceptors для добавления Authorization header
- ✅ AuthGuard - защита приватных роутов
- ✅ PublicGuard - редирект авторизованных с публичных страниц
- ✅ Автоматический редирект на `/signIn` при истечении токенов

### Управление пользователями
- ✅ Регистрация с валидацией
- ✅ Вход в систему
- ✅ Просмотр списка всех пользователей
- ✅ Просмотр профиля пользователя
- ✅ Редактирование своего профиля (имя, email)
- ✅ Загрузка и обновление аватара (до 1 МБ)
- ✅ Автоматическая генерация аватара с первой буквой имени

### Управление задачами
- ✅ Просмотр всех задач
- ✅ Страница "Мои задачи" с личными задачами
- ✅ Создание задач
- ✅ Редактирование задач (только своих)
- ✅ Удаление задач (только своих)
- ✅ Переключение статуса задачи (чекбокс)
- ✅ Статистика задач (всего/выполнено/в процессе)

### UI/UX
- ✅ Красивый современный UI с Tailwind CSS v4
- ✅ Полностью адаптивный дизайн
- ✅ Стильная страница 404 с градиентами и анимациями
- ✅ Обработка ошибок с уведомлениями
- ✅ Loading состояния для всех операций
- ✅ Интерактивные формы с валидацией
- ✅ Превью изображения перед загрузкой аватара

## Entities (API слой)

Все API запросы инкапсулированы в классы:

### AuthApi
- `signUp(userData)` - регистрация (отправка email)
- `activateAccount(token)` - активация аккаунта по токену
- `signIn(credentials)` - вход (только для активированных)
- `signOut()` - выход
- `refreshTokens()` - обновление токенов

### UserApi
- `getAll()` - получить всех пользователей
- `getById(id)` - получить пользователя по ID
- `updateProfile(id, updateData)` - обновить профиль
- `uploadAvatar(id, formData)` - загрузить аватар
- `deleteById(id)` - удалить пользователя

### TaskApi
- `getAll()` - получить все задачи
- `getById(id)` - получить задачу по ID
- `getByUserId(userId)` - получить задачи пользователя
- `create(newTaskData)` - создать задачу
- `updateById(id, updateData)` - обновить задачу
- `deleteById(id)` - удалить задачу

## Axios Instance

Настроенный axios (`shared/lib/axiosInstance.js`) с:
- Базовым URL из переменной окружения `VITE_API_URL`
- Автоматическим добавлением токена в заголовки
- Автоматическим обновлением токена при истечении (403 статус)
- Поддержкой `withCredentials: true` для cookies с refresh token
- Редиректом на `/signIn` при неудачном обновлении токенов

## Страницы и роуты

| Роут | Компонент | Описание | Защита |
|------|-----------|----------|--------|
| `/` | HomePage | Главная страница | - |
| `/signIn` | SignInPage | Страница входа | PublicGuard |
| `/signUp` | SignUpPage | Страница регистрации | PublicGuard |
| `/activate/:token` | ActivatePage | Активация аккаунта по email | - |
| `/users` | UsersPage | Список пользователей | - |
| `/users/:id` | CurrentUserPage | Профиль пользователя | - |
| `/profile` | ProfilePage | Редактирование профиля | AuthGuard |
| `/tasks` | TasksPage | Все задачи | - |
| `/my-tasks` | MyTasksPage | Мои задачи | AuthGuard |
| `*` | NotFoundPage | 404 - Страница не найдена | - |

## Guards (HOCs)

### AuthGuard
Защищает приватные роуты. Если пользователь не авторизован, редиректит на `/signIn`.

### PublicGuard
Защищает публичные роуты (вход/регистрация). Если пользователь уже авторизован, редиректит на `/`.

## Переменные окружения

Создайте файл `.env` в корне папки `client`:

```env
# API сервера
VITE_API_URL=http://localhost:4000/api

# URL сервера для загрузки файлов (аватары)
VITE_SERVER_URL=http://localhost:4000
```

## Особенности

### Загрузка аватаров
- Поддерживаемые форматы: JPEG, PNG, GIF, WEBP
- Максимальный размер: 1 МБ
- Превью перед загрузкой
- Автоматическое отображение первой буквы имени если нет аватара

### Управление состоянием
- Локальное состояние через `useState`
- Глобальное состояние пользователя в `App.jsx`
- Проброс через props (без Redux/Context)

### Обработка ошибок
- Централизованная через axios interceptors
- Уведомления об ошибках на каждой странице
- Автоматическая обработка 403 (истечение токена)
